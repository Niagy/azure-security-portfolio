# **Exercise â€“ Create a Route Table, Custom Route, and Virtual Network**

## **Overview**

In this lab, you create:

* A **route table**
* A **custom route**
* A **virtual network with three subnets**
* An **association between the route table and a subnet**

Youâ€™ll complete the tasks using **Azure Cloud Shell** and the **Azure CLI**.

---

## **ðŸ•’ Estimated Time**

20 minutes

---

## **ðŸ§° Prerequisites**

* An Azure subscription
* A resource group (replace `"myResourceGroupName"` with your own)

---

# **Task 1 â€” Create a Route Table and a Custom Route**

## **1. Open Azure Cloud Shell**

1. Go to the Azure portal
2. Open **Cloud Shell**
3. Select **Settings â†’ Go to Classic version**

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/cloudShellClassic.png)`

---

## **2. Create a Route Table**

```bash
az network route-table create \
    --name publictable \
    --resource-group "myResourceGroupName" \
    --disable-bgp-route-propagation false
```

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/routeTable.png)`

---

## **3. Add a Custom Route**

This route directs all traffic intended for the **private subnet (10.0.1.0/24)** through a **virtual appliance at 10.0.2.4**.

```bash
az network route-table route create \
    --route-table-name publictable \
    --resource-group "myResourceGroupName" \
    --name productionsubnet \
    --address-prefix 10.0.1.0/24 \
    --next-hop-type VirtualAppliance \
    --next-hop-ip-address 10.0.2.4
```

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/customRouteCreated.png)`

---

# **Task 2 â€” Create a Virtual Network and Subnets**

You will now create a virtual network named **vnet** and three subnets:

* **publicsubnet**
* **privatesubnet**
* **dmzsubnet**

---

## **1. Create the Virtual Network and Public Subnet**

```bash
az network vnet create \
    --name vnet \
    --resource-group "myResourceGroupName" \
    --address-prefixes 10.0.0.0/16 \
    --subnet-name publicsubnet \
    --subnet-prefixes 10.0.0.0/24
```

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/vnet_publicsubnet.png)`

---

## **2. Create the Private Subnet**

```bash
az network vnet subnet create \
    --name privatesubnet \
    --vnet-name vnet \
    --resource-group "myResourceGroupName" \
    --address-prefixes 10.0.1.0/24
```

---

## **3. Create the DMZ Subnet**

```bash
az network vnet subnet create \
    --name dmzsubnet \
    --vnet-name vnet \
    --resource-group "myResourceGroupName" \
    --address-prefixes 10.0.2.0/24
```

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/private_dmz_subnet.png)`

---

## **4. List All Subnets**

```bash
az network vnet subnet list \
    --resource-group "myResourceGroupName" \
    --vnet-name vnet \
    --output table
```

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/allSubnets.png)`

---

# **Task 3 â€” Associate the Route Table with the Public Subnet**

This ensures that **publicsubnet traffic follows the custom route** created earlier.

```bash
az network vnet subnet update \
    --name publicsubnet \
    --vnet-name vnet \
    --resource-group "myResourceGroupName" \
    --route-table publictable
```

ðŸ“¸ *Screenshot Placeholder*
`![screenshot](./screenshot/routeTableAssociation.png)`

---

# **âœ” Lab Complete**

You have successfully:

* Created a route table
* Added a custom route
* Built a virtual network with three subnets
* Associated a route table with a subnet

---


